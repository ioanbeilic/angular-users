<mat-toolbar color="primary">
  <span class="fill-remaining-space">{{ title }}</span>
</mat-toolbar>

<div class="container" novalidate>
  <form
    [formGroup]="formGroup"
    (ngSubmit)="onSubmit(formGroup.value)"
    class="form"
  >
    <mat-form-field class="form-element">
      <input matInput placeholder="Alias" formControlName="alias" />

      <mat-error *ngIf="hasError('alias', 'required')"
        >Alias is required</mat-error
      >
      <mat-error *ngIf="hasError('alias', 'maxlength')"
        >Alias have more than 20 characters</mat-error
      >
      <mat-error *ngIf="hasError('alias', 'minlength')"
        >Alias mush have at less 4 characters:</mat-error
      >
    </mat-form-field>

    <mat-form-field class="form-element">
      <input matInput placeholder="Name" formControlName="name" />
      <mat-error *ngIf="hasError('name', 'required')"
        >`Name is required</mat-error
      >
      <mat-error *ngIf="hasError('name', 'maxlength')"
        >Name have more than 100 characters</mat-error
      >
      <mat-error *ngIf="hasError('name', 'minlength')"
        >Name mush have at less 4 characters:</mat-error
      >
    </mat-form-field>

    <mat-form-field class="form-element">
      <input matInput placeholder="Email" formControlName="email" />
      <mat-error *ngIf="hasError('email', 'required')"
        >email is required</mat-error
      >
      <mat-error *ngIf="hasError('email', 'pattern')"
        >Invalid email format</mat-error
      >
    </mat-form-field>

    <mat-form-field *ngIf="!withData" class="form-element">
      <input
        matInput
        placeholder="Password"
        formControlName="password"
        [type]="fieldTextType ? 'text' : 'password'"
      />
      <button
        mat-button
        matSuffix
        mat-icon-button
        aria-label="Clear"
        (click)="fieldTextType = !fieldTextType"
      >
        <mat-icon *ngIf="!fieldTextType">visibility_off</mat-icon>
        <mat-icon *ngIf="fieldTextType">visibility</mat-icon>
      </button>
      <mat-hint
        >Choose a password of at least six characters, one uppercase letter and
        one number</mat-hint
      >
      <mat-error *ngIf="hasError('password', 'required')"
        >Password is required</mat-error
      >
      <mat-error *ngIf="hasError('password', 'pattern')"
        >Password must have at less 6 characters and 1 number</mat-error
      >
    </mat-form-field>

    <mat-form-field *ngIf="!withData" class="form-element">
      <input
        matInput
        placeholder="Confirm Password"
        formControlName="confirmPassword"
        [type]="fieldTextType ? 'text' : 'password'"
      />
      <button
        mat-button
        matSuffix
        mat-icon-button
        aria-label="Clear"
        (click)="fieldTextType = !fieldTextType"
      >
        <mat-icon *ngIf="fieldTextType">visibility</mat-icon>
        <mat-icon *ngIf="!fieldTextType">visibility_off</mat-icon>
      </button>

      <mat-hint
        >Choose a password of at least six characters, one uppercase letter and
        one number</mat-hint
      >
      <mat-error *ngIf="hasError('confirmPassword', 'required')"
        >Confirm password is required</mat-error
      >
      <mat-error *ngIf="hasError('confirmPassword', 'mustMatch')"
        >Passwords don't match</mat-error
      >
    </mat-form-field>

    <mat-form-field class="form-element">
      <mat-select
        placeholder="User Type"
        formControlName="userType"
        [(value)]="selectedUserType"
      >
        <mat-option *ngFor="let userType of userTypes" [value]="userType">{{
          userType
        }}</mat-option>
      </mat-select>
    </mat-form-field>
    <!--
  <div class="custom-divider">
    <mat-divider></mat-divider>
    <span>Department</span>
    <mat-divider></mat-divider>
  </div>
-->

    <mat-form-field class="form-element">
      <mat-select
        placeholder="Department"
        formControlName="departments"
        [(value)]="selectedDepartment"
        multiple
      >
        <mat-option
          *ngFor="let department of departments"
          [value]="department"
          >{{ department }}</mat-option
        >
      </mat-select>
    </mat-form-field>

    <mat-form-field class="form-element">
      <mat-select
        placeholder="Privileges"
        formControlName="privileges"
        [(value)]="selectedPrivileges"
        multiple
      >
        <mat-option *ngFor="let privilege of privileges" [value]="privilege">{{
          privilege
        }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="form-element">
      <mat-select
        placeholder="Status"
        formControlName="status"
        [(value)]="selectedStatus"
      >
        <mat-option *ngFor="let status of statusList" [value]="status">
          <span *ngIf="status"> Active</span>
          <span *ngIf="!status"> Inactive</span>
        </mat-option>
      </mat-select>
    </mat-form-field>

    <div *ngIf="!inputDisabled" class="form-element">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        class="button"
        [disabled]="!formGroup.valid"
      >
        <mat-icon inline="true">save</mat-icon>
        Save
      </button>
    </div>
  </form>
</div>
